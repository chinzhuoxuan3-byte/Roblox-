local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "jentz hub",
    Icon = "rbxassetid://90861284322548",
    Author = "TrackMaker",
    Folder = "jentzhub",
    Size = UDim2.fromOffset(580, 460),
    Transparent = true,
    Theme = "Dark",
    SideBarWidth = 200,
    HasOutline = false,
    Background = "rbxassetid://73191961194532"
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local Tab = Window:Tab({
    Title = "主要功能",
    Icon = "crown"
})

local TargetSection = Tab:Section({
    Title = "稀有角色筛选",
    TextXAlignment = "Left"
})

local RareTargets = {
    "67", "La Vacca Saturnita", "Job Job Sahur", "Matteo", "Pot Hotspot", "Cavallo Virtuoso", "Esok Sekolah", 
    "La Grande Combination", "Girafa Celestre", "Chillin Chilli", "Swag Soda", "Strawberelli Flamingelli", 
    "Cocosini Mama", "Quivioli Ameleonni", "Orangutini Ananasini", "Chef Crabracadabra",
    "Crabbo Limonetta", "Bandito Axolito", "Stoppo Luminino", "Money Money Man", "Karloo", "Pirulitoita Bicicleteira"
}
local TypeTargets = {"All", "Gold", "Diamond", "Regular", "Snowy", "Tornado", "Magmatic", "Lightning", "Galaxy", "Stinky", "Disco", "Radioactive", "Sakura"}

local SelectedTargets = {}
local SelectedTypes = {}
local CustomTargetName = ""
local EnableTypeCheck = false

TargetSection:Dropdown({
    Title = "选择捕获目标",
    Multi = true,
    Values = RareTargets,
    Value = {},
    Callback = function(val)
        SelectedTargets = val
    end
})

TargetSection:Input({
    Title = "名字选择目标",
    Placeholder = "...",
    Callback = function(text)
        CustomTargetName = text
    end
})

TargetSection:Dropdown({
    Title = "选择蛋种类 (配合强制购买)",
    Multi = true,
    Values = TypeTargets,
    Value = {},
    Callback = function(val)
        SelectedTypes = val
    end
})

TargetSection:Toggle({
    Title = "开启种类强制限制 (限制品质购买)",
    Callback = function(state)
        EnableTypeCheck = state
    end
})

local RaritySection = Tab:Section({
    Title = "品质强制买/停",
    TextXAlignment = "Left"
})

local Rarities = {"Common", "Uncommon", "Rare", "Epic", "Mythic", "Secret", "Exotic", "Event", "Exclusive", "Admin", "OG", "Divine", "GOD"}
local RarityToggles = {}

for _, r in ipairs(Rarities) do
    RaritySection:Toggle({
        Title = r .. " 品质强制买/停",
        Value = true,
        Callback = function(state)
            RarityToggles[r] = state
        end
    })
    RarityToggles[r] = true
end

local AutoTab = Window:Tab({
    Title = "自动化",
    Icon = "bot"
})

local AutoSection = AutoTab:Section({
    Title = "功能开关",
    TextXAlignment = "Left"
})

local AutoSpawnSmart = false
AutoSection:Toggle({
    Title = "自动刷新蛋 (出目标停止)",
    Callback = function(state)
        AutoSpawnSmart = state
    end
})

local AutoLoop = false
AutoSection:Toggle({
    Title = "自动购买+秒抽循环",
    Callback = function(state)
        AutoLoop = state
    end
})

local AutoHatch = false
AutoSection:Toggle({
    Title = "自动孵化蛋 (Stand 1-50)",
    Callback = function(state)
        AutoHatch = state
    end
})

local AutoPlace = false
AutoSection:Toggle({
    Title = "自动放置选择目标 (仅空位)",
    Callback = function(state)
        AutoPlace = state
    end
})

local AutoInteract = false
AutoSection:Toggle({
    Title = "开启手机端自动点击",
    Callback = function(state)
        AutoInteract = state
    end
})

local AutoSell = false
AutoSection:Toggle({
    Title = "自动卖钱 (TP逻辑)",
    Callback = function(state)
        AutoSell = state
    end
})

local AutoUpgrade50 = false
AutoSection:Toggle({
    Title = "自动升级至50级 (1-50)",
    Callback = function(state)
        AutoUpgrade50 = state
    end
})

local AutoPickup = false
AutoSection:Toggle({
    Title = "自动拾取 (Stand 1-50)",
    Callback = function(state)
        AutoPickup = state
    end
})

local UpgradeSpeed = 0.1
AutoSection:Slider({
    Title = "升级检测间隔 (秒)",
    Step = 0.1, 
    Value = {
        Min = 0.1,
        Max = 2.0,
        Default = 0.1
    },
    Callback = function(val)
        UpgradeSpeed = val
    end
})

local CONFIG = {
    clickInterval = 0.1,
    buttonPatterns = { "ProximityPrompt", "Interact", "Action", "Click", "Tap", "Press" }
}

local function isInteractionButton(guiObject)
    if not (guiObject:IsA("GuiButton") or guiObject:IsA("TextButton") or guiObject:IsA("ImageButton")) then return false end
    if not guiObject.Visible or guiObject.Transparency >= 0.9 then return false end
    local fullName = guiObject:GetFullName():lower()
    for _, pattern in ipairs(CONFIG.buttonPatterns) do
        if string.find(fullName, pattern:lower()) then return true end
    end
    if guiObject:IsA("ImageButton") then return true end
    local viewportSize = workspace.CurrentCamera.ViewportSize
    local screenCenter = Vector2.new(viewportSize.X / 2, viewportSize.Y / 2)
    local buttonCenter = guiObject.AbsolutePosition + (guiObject.AbsoluteSize / 2)
    return (buttonCenter - screenCenter).Magnitude < 400
end

local function clickButton(button)
    if button and button.Parent then
        pcall(function()
            for _, connection in ipairs(getconnections(button.MouseButton1Click)) do connection:Fire() end
            for _, connection in ipairs(getconnections(button.Activated)) do connection:Fire() end
            for _, connection in ipairs(getconnections(button.TouchTap)) do connection:Fire() end
        end)
    end
end

local function GetNearestRigFrontCFrame()
    local Plots = workspace:FindFirstChild("CoreObjects") and workspace.CoreObjects:FindFirstChild("Plots")
    if not Plots then return nil end
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    local closestTorso = nil
    local minDistance = math.huge
    for _, plot in pairs(Plots:GetChildren()) do
        local rig = plot:FindFirstChild("Rig")
        if rig then
            local torso = rig:FindFirstChild("UpperTorso")
            if torso and torso:IsA("BasePart") then
                local dist = (hrp.Position - torso.Position).Magnitude
                if dist < minDistance then
                    minDistance = dist
                    closestTorso = torso
                end
            end
        end
    end
    return closestTorso and closestTorso.CFrame * CFrame.new(0, 0, -5) or nil
end

local function CheckRarity(eggInstance, targetRarity)
    for _, obj in pairs(eggInstance:GetDescendants()) do
        if obj:IsA("TextLabel") and (obj.Name == "Rarity" or obj.Name == "TextLabel") then
            if string.find(obj.Text, targetRarity) then return true end
        end
    end
    return false
end

local lastClickTime = 0
RunService.Heartbeat:Connect(function()
    if not AutoInteract then return end
    local currentTime = tick()
    if currentTime - lastClickTime >= CONFIG.clickInterval then
        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("ProximityPrompt") and obj.Enabled then
                if obj.Parent and obj.Parent:IsA("BasePart") then
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp and (obj.Parent.Position - hrp.Position).Magnitude <= obj.MaxActivationDistance then
                        pcall(function() fireproximityprompt(obj) end)
                        lastClickTime = currentTime
                        return
                    end
                end
            end
        end
        local viewportSize = workspace.CurrentCamera.ViewportSize
        local screenCenter = Vector2.new(viewportSize.X / 2, viewportSize.Y / 2)
        local closestButton = nil
        local closestDistance = math.huge
        for _, gui in ipairs(playerGui:GetDescendants()) do
            if isInteractionButton(gui) then
                local buttonCenter = gui.AbsolutePosition + (gui.AbsoluteSize / 2)
                local distance = (buttonCenter - screenCenter).Magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    closestButton = gui
                end
            end
        end
        if closestButton then
            clickButton(closestButton)
            lastClickTime = currentTime
        end
    end
end)

task.spawn(function()
    while true do
        if AutoSell then
            pcall(function()
                ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RE/PickupBoxes"):FireServer()
                local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                local targetCF = GetNearestRigFrontCFrame()
                if hrp and targetCF and (hrp.Position - targetCF.Position).Magnitude > 3 then
                    hrp.CFrame = targetCF
                end
            end)
        end
        task.wait(0.5)
    end
end)

task.spawn(function()
    local SpawnRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RF/RequestEggSpawn")
    
    while true do
        if AutoSpawnSmart then
            local eggsFolder = workspace:FindFirstChild("CoreObjects") and workspace.CoreObjects:FindFirstChild("Eggs")
            local hasTarget = false
            
            if eggsFolder then
                for _, egg in pairs(eggsFolder:GetChildren()) do
                    local eggName = egg.Name
                    
                    for _, name in pairs(SelectedTargets) do
                        if string.find(eggName, name) then hasTarget = true; break end
                    end
                    
                    if not hasTarget and CustomTargetName ~= "" then
                        if string.find(eggName, CustomTargetName) then hasTarget = true end
                    end
                    
                    if not hasTarget then
                        local isRarityMatch = false
                        for rarityName, isEnabled in pairs(RarityToggles) do
                            if isEnabled and CheckRarity(egg, rarityName) then
                                isRarityMatch = true
                                break
                            end
                        end

                        if isRarityMatch then
                            if EnableTypeCheck then
                                local isTypeMatch = false
                                local anyTypeSelected = false
                                for _, _ in pairs(SelectedTypes) do
                                    anyTypeSelected = true; break
                                end
                                
                                if not anyTypeSelected then
                                    if not (string.find(eggName, "Gold") or string.find(eggName, "Diamond") or string.find(eggName, "Shiny")) then isTypeMatch = true end
                                else
                                    if table.find(SelectedTypes, "All") then
                                        isTypeMatch = true
                                    else
                                        for _, typeKey in pairs(SelectedTypes) do
                                            if typeKey == "Regular" then
                                                if not (string.find(eggName, "Gold") or string.find(eggName, "Diamond") or string.find(eggName, "Shiny")) then isTypeMatch = true; break end
                                            elseif string.find(eggName, typeKey) then 
                                                isTypeMatch = true; break 
                                            end
                                        end
                                    end
                                end
                                
                                if isTypeMatch then hasTarget = true end
                            else
                                hasTarget = true
                            end
                        end
                    end
                    
                    if hasTarget then break end
                end
            end
            
            if not hasTarget then
                pcall(function() SpawnRemote:InvokeServer() end)
            end
        end
        task.wait(0.5)
    end
end)

task.spawn(function()
    local BuyRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RF/BuyEgg")
    local SpawnRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RF/RequestEggSpawn")
    local HatchRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RE/HatchEgg")
    local PlotsFolder = Workspace:WaitForChild("CoreObjects"):WaitForChild("Plots")

    local function GetMyPlot()
        for _, plot in pairs(PlotsFolder:GetChildren()) do
            local owner = plot:FindFirstChild("Owner")
            if owner and owner.Value == player then return plot end
        end
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local root = char.HumanoidRootPart
            local closest = nil
            local minDidst = 9999
            for _, plot in pairs(PlotsFolder:GetChildren()) do
                local ref = plot:FindFirstChild("Floor") or plot:FindFirstChild("Base") or plot:FindFirstChildWhichIsA("BasePart", true)
                if ref then
                    local dist = (root.Position - ref.Position).Magnitude
                    if dist < minDidst then minDidst = dist; closest = plot end
                end
            end
            if closest and minDidst < 300 then return closest end
        end
        return nil
    end

    while true do
        if AutoLoop then
            local eggsFolder = workspace:FindFirstChild("CoreObjects") and workspace.CoreObjects:FindFirstChild("Eggs")
            
            if eggsFolder then
                local foundAndBought = false

                for _, egg in pairs(eggsFolder:GetChildren()) do
                    local eggName = egg.Name
                    
                    local isNameTarget = false
                    for _, name in pairs(SelectedTargets) do
                        if string.find(eggName, name) then isNameTarget = true; break end
                    end
                    if not isNameTarget and CustomTargetName ~= "" then
                         if string.find(eggName, CustomTargetName) then isNameTarget = true end
                    end

                    local isTypeMatch = false
                    local anyTypeSelected = false
                    for _, _ in pairs(SelectedTypes) do
                        anyTypeSelected = true; break
                    end
                    
                    if not anyTypeSelected then
                        if not (string.find(eggName, "Gold") or string.find(eggName, "Diamond") or string.find(eggName, "Shiny")) then isTypeMatch = true end
                    else
                        if table.find(SelectedTypes, "All") then
                            isTypeMatch = true
                        else
                            for _, typeKey in pairs(SelectedTypes) do
                                if typeKey == "Regular" then
                                    if not (string.find(eggName, "Gold") or string.find(eggName, "Diamond") or string.find(eggName, "Shiny")) then isTypeMatch = true; break end
                                elseif string.find(eggName, typeKey) then 
                                    isTypeMatch = true; break 
                                end
                            end
                        end
                    end

                    local isRarityMatch = false
                    for rarityName, isEnabled in pairs(RarityToggles) do
                        if isEnabled and CheckRarity(egg, rarityName) then
                            isRarityMatch = true
                            break
                        end
                    end

                    local finalShouldBuy = false

                    if isNameTarget then
                        finalShouldBuy = true 
                    elseif isRarityMatch then
                        if EnableTypeCheck then
                            if isTypeMatch then
                                finalShouldBuy = true
                            end
                        else
                            finalShouldBuy = true
                        end
                    end
                    
                    if finalShouldBuy then
                        BuyRemote:InvokeServer(eggName, 1)
                        foundAndBought = true
                        
                        local MyPlot = GetMyPlot()
                        if MyPlot and MyPlot:FindFirstChild("Stands") then
                            for i = 1, 50 do
                                local stand = MyPlot.Stands:FindFirstChild("Stand"..i)
                                if stand then
                                    local eggModel = nil
                                    for _, c in pairs(stand:GetChildren()) do
                                        if c:IsA("Model") and c.Name ~= "UpgradeButton" and c.Name ~= "UpgradeGUI" and c.Name ~= "Base" and c.Name ~= "Part" then
                                            eggModel = c.Name
                                            break
                                        end
                                    end
                                    if eggModel then
                                        HatchRemote:FireServer("Stand"..i, eggModel)
                                    end
                                end
                            end
                        end

                        pcall(function() SpawnRemote:InvokeServer() end)
                        
                        task.wait(0.1)
                        break
                    end
                end

                if not foundAndBought then
                    pcall(function() SpawnRemote:InvokeServer() end)
                end
            end
        end
        task.wait(0.4)
    end
end)

task.spawn(function()
    local UpgradeRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RF/UpgradeBrainrot")
    local PlotsFolder = Workspace:WaitForChild("CoreObjects"):WaitForChild("Plots")
    local CompletedStands = {}
    local IsUpgrading = {}

    local function GetMyPlot()
        for _, plot in pairs(PlotsFolder:GetChildren()) do
            local owner = plot:FindFirstChild("Owner")
            if owner and owner.Value == player then return plot end
        end
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local root = char.HumanoidRootPart
            local closest = nil
            local minDidst = 9999
            for _, plot in pairs(PlotsFolder:GetChildren()) do
                local ref = plot:FindFirstChild("Floor") or plot:FindFirstChild("Base") or plot:FindFirstChildWhichIsA("BasePart", true)
                if ref then
                    local dist = (root.Position - ref.Position).Magnitude
                    if dist < minDidst then minDidst = dist; closest = plot end
                end
            end
            if closest and minDidst < 300 then return closest end
        end
        return nil
    end

    while true do
        if AutoUpgrade50 then
            local MyPlot = GetMyPlot()
            if MyPlot then
                local Stands = MyPlot:FindFirstChild("Stands")
                if Stands then
                    for i = 1, 50 do
                        local name = "Stand" .. i
                        if not CompletedStands[name] and not IsUpgrading[name] then
                            local stand = Stands:FindFirstChild(name)
                            if stand then
                                task.spawn(function()
                                    local btn = stand:FindFirstChild("UpgradeButton")
                                    local gui = btn and btn:FindFirstChild("UpgradeGUI")
                                    local upg = gui and gui:FindFirstChild("Upgrade")
                                    local lvlLabel = upg and upg:FindFirstChild("Level")
                                    
                                    if lvlLabel then
                                        local txt = lvlLabel.Text
                                        if string.find(string.lower(txt), "max") then
                                            CompletedStands[name] = true
                                        else
                                            local lvlNum = tonumber(string.match(txt, "%d+"))
                                            if lvlNum then
                                                if lvlNum >= 50 then
                                                    CompletedStands[name] = true
                                                else
                                                    IsUpgrading[name] = true
                                                    pcall(function() UpgradeRemote:InvokeServer(name) end)
                                                    local sTime = tick()
                                                    while tick() - sTime < 1.0 do
                                                        local checkLbl = stand:FindFirstChild("UpgradeButton") and stand.UpgradeButton:FindFirstChild("UpgradeGUI") and stand.UpgradeButton.UpgradeGUI:FindFirstChild("Upgrade") and stand.UpgradeButton.UpgradeGUI.Upgrade:FindFirstChild("Level")
                                                        if checkLbl then
                                                            local checkNum = tonumber(string.match(checkLbl.Text, "%d+"))
                                                            if checkNum and checkNum > lvlNum then break end
                                                        end
                                                        task.wait(0.1)
                                                    end
                                                    IsUpgrading[name] = false
                                                end
                                            end
                                        end
                                    end
                                end)
                            end
                        end
                    end
                end
            end
        else
            table.clear(CompletedStands)
            table.clear(IsUpgrading)
        end
        task.wait(UpgradeSpeed)
    end
end)

task.spawn(function()
    local HatchRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RE/HatchEgg")
    local PlotsFolder = Workspace:WaitForChild("CoreObjects"):WaitForChild("Plots")

    local function GetEggNameFromStand(stand)
        for _, child in pairs(stand:GetChildren()) do
            if child:IsA("Model") then
                if child.Name ~= "UpgradeButton" and child.Name ~= "UpgradeGUI" and child.Name ~= "Base" and child.Name ~= "Part" then
                    return child.Name
                end
            end
        end
        return nil
    end

    local function GetMyPlot()
        for _, plot in pairs(PlotsFolder:GetChildren()) do
            local owner = plot:FindFirstChild("Owner")
            if owner and owner.Value == player then return plot end
        end
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local root = char.HumanoidRootPart
            local closest = nil
            local minDidst = 9999
            for _, plot in pairs(PlotsFolder:GetChildren()) do
                local ref = plot:FindFirstChild("Floor") or plot:FindFirstChild("Base") or plot:FindFirstChildWhichIsA("BasePart", true)
                if ref then
                    local dist = (root.Position - ref.Position).Magnitude
                    if dist < minDidst then minDidst = dist; closest = plot end
                end
            end
            if closest and minDidst < 300 then return closest end
        end
        return nil
    end

    while true do
        if AutoHatch then
            local MyPlot = GetMyPlot()
            if MyPlot then
                local Stands = MyPlot:FindFirstChild("Stands")
                if Stands then
                    for i = 1, 50 do
                        local standName = "Stand" .. i
                        local stand = Stands:FindFirstChild(standName)
                        
                        if stand then
                            local currentModelName = GetEggNameFromStand(stand)
                            if currentModelName then
                                local isTarget = false
                                for _, name in pairs(SelectedTargets) do
                                    if string.find(currentModelName, name) then
                                        isTarget = true
                                        break
                                    end
                                end
                                if not isTarget and CustomTargetName ~= "" then
                                    if string.find(currentModelName, CustomTargetName) then
                                        isTarget = true
                                    end
                                end

                                if not isTarget then
                                    pcall(function()
                                        HatchRemote:FireServer(standName, currentModelName)
                                    end)
                                end
                            end
                        end
                    end
                end
            end
        end
        task.wait(0.5)
    end
end)

task.spawn(function()
    local PlaceRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RF/PlaceEgg")
    local PlotsFolder = Workspace:WaitForChild("CoreObjects"):WaitForChild("Plots")

    local function GetMyPlot()
        for _, plot in pairs(PlotsFolder:GetChildren()) do
            local owner = plot:FindFirstChild("Owner")
            if owner and owner.Value == player then return plot end
        end
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local root = char.HumanoidRootPart
            local closest = nil
            local minDidst = 9999
            for _, plot in pairs(PlotsFolder:GetChildren()) do
                local ref = plot:FindFirstChild("Floor") or plot:FindFirstChild("Base") or plot:FindFirstChildWhichIsA("BasePart", true)
                if ref then
                    local dist = (root.Position - ref.Position).Magnitude
                    if dist < minDidst then minDidst = dist; closest = plot end
                end
            end
            if closest and minDidst < 300 then return closest end
        end
        return nil
    end

    while true do
        if AutoPlace then
            local MyPlot = GetMyPlot()
            if MyPlot then
                local Stands = MyPlot:FindFirstChild("Stands")
                if Stands then
                    for i = 1, 50 do
                        local standName = "Stand" .. i
                        local stand = Stands:FindFirstChild(standName)
                        
                        if stand then
                            local occupied = false
                            for _, child in pairs(stand:GetChildren()) do
                                if child:IsA("Model") and child.Name ~= "UpgradeButton" and child.Name ~= "UpgradeGUI" and child.Name ~= "Base" and child.Name ~= "Part" then
                                    occupied = true
                                    break
                                end
                            end

                            if not occupied then
                                local foundTarget = nil
                                for _, name in pairs(SelectedTargets) do
                                    foundTarget = name; break
                                end
                                
                                if not foundTarget and CustomTargetName ~= "" then
                                    foundTarget = CustomTargetName 
                                end

                                if foundTarget then
                                    task.spawn(function()
                                        pcall(function()
                                            PlaceRemote:InvokeServer(standName, foundTarget)
                                        end)
                                    end)
                                end
                            end
                        end
                    end
                end
            end
        end
        task.wait(0.8)
    end
end)

task.spawn(function()
    local PickupRemote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Packages"):WaitForChild("Networker"):WaitForChild("RE/PickupBrainrot")
    local PlotsFolder = Workspace:WaitForChild("CoreObjects"):WaitForChild("Plots")

    local function GetMyPlot()
        for _, plot in pairs(PlotsFolder:GetChildren()) do
            local owner = plot:FindFirstChild("Owner")
            if owner and owner.Value == player then return plot end
        end
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local root = char.HumanoidRootPart
            local closest = nil
            local minDidst = 9999
            for _, plot in pairs(PlotsFolder:GetChildren()) do
                local ref = plot:FindFirstChild("Floor") or plot:FindFirstChild("Base") or plot:FindFirstChildWhichIsA("BasePart", true)
                if ref then
                    local dist = (root.Position - ref.Position).Magnitude
                    if dist < minDidst then minDidst = dist; closest = plot end
                end
            end
            if closest and minDidst < 300 then return closest end
        end
        return nil
    end

    while true do
        if AutoPickup then
            local MyPlot = GetMyPlot()
            if MyPlot then
                local Stands = MyPlot:FindFirstChild("Stands")
                if Stands then
                    for i = 1, 50 do
                        local standName = "Stand" .. i
                        local stand = Stands:FindFirstChild(standName)
                        if stand then
                            local hasItem = false
                             for _, child in pairs(stand:GetChildren()) do
                                if child:IsA("Model") and child.Name ~= "UpgradeButton" and child.Name ~= "UpgradeGUI" and child.Name ~= "Base" and child.Name ~= "Part" then
                                    hasItem = true
                                    break
                                end
                            end
                            
                            if hasItem then
                                pcall(function()
                                    local args = { standName }
                                    PickupRemote:FireServer(unpack(args))
                                end)
                            end
                        end
                    end
                end
            end
        end
        task.wait(0.8)
    end
end)

Window:Notify({
    Title = "系统就绪",
    Content = "jentz hub 已加载",
    Duration = 5
})
